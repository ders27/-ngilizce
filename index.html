<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ä°ngilizce Kelime KartlarÄ± & Test</title>
  <style>
    /* YukarÄ±daki yeni CSS stillerini buraya yapÄ±ÅŸtÄ±rÄ±n */
    :root {
      --primary: #5a189a;
      --accent: #ffb703;
      --bg: #e0f2fe;
      --text: #2c3e50;
      --card-bg: #ffffff;
      --correct: #4CAF50;
      --wrong: #E53935;
      --btn-font: 1.6em;
      --transition-speed: 0.3s;
    }
    *, *::before, *::after {
      box-sizing: border-box; margin: 0; padding: 0;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg); color: var(--text);
      display: flex; flex-direction: column; align-items: center;
      padding: 20px; text-align: center; min-height: 100vh;
      transition: background-color var(--transition-speed) ease;
    }
    h1 {
      color: var(--primary);
      font-size: 2.4em;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .card {
      width: 90vw; max-width: 360px; height: 260px;
      background: var(--card-bg); border: 5px solid var(--primary);
      border-radius: 18px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 15px; display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      user-select: none; cursor: pointer; position: relative;
      transform-style: preserve-3d; /* 3D Ã§evirme iÃ§in gerekli */
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.3s ease;
    }
    .card.flipped {
      transform: perspective(1000px) rotateY(180deg);
    }
    .card .emoji {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 50px; /* Daha kÃ¼Ã§Ã¼k ve kÃ¶ÅŸede */
      opacity: 0.6;
      backface-visibility: hidden;
    }
    .card .text {
      font-size: 2.4em; color: var(--primary);
      font-weight: 700; user-select: none;
      backface-visibility: hidden; /* Ã‡evirme animasyonu iÃ§in */
      position: absolute;
      width: 100%;
      padding: 0 15px;
    }
    .card .translation {
      margin-top: 8px; font-size: 1.8em; color: var(--text);
      display: none; /* BaÅŸlangÄ±Ã§ta gizli */
      backface-visibility: hidden; /* Ã‡evirme animasyonu iÃ§in */
      position: absolute;
      width: 100%;
      padding: 0 15px;
      transform: rotateY(180deg); /* Ã‡evrilince gÃ¶rÃ¼nsÃ¼n */
    }
    .controls {
      margin-top: 20px; display: flex; flex-wrap: wrap;
      gap: 8px; justify-content: center;
    }
    button {
      font-size: var(--btn-font); padding: 12px 28px;
      background: var(--accent); color: #fff; border: none;
      border-radius: 12px; cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all var(--transition-speed) ease;
    }
    button:hover:not(:disabled) {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }
    button:disabled { opacity: .6; cursor: not-allowed; }
    #testBtn { margin-top: 20px; }
    .hide { display: none !important; }
    .question-box {
      width: 90vw; max-width: 360px; min-height: 110px;
      background: #fff; border: 5px solid var(--primary);
      border-radius: 18px; padding: 20px;
      font-size: 2em; font-weight: 700;
      display: flex; justify-content: center; align-items: center;
      margin-bottom: 20px; user-select: none;
    }
    .answers {
      display: flex; flex-direction: column;
      gap: 14px; /* ÅžÄ±klar arasÄ± mesafe */
      width: 90vw; max-width: 360px; margin-bottom: 20px;
    }
    .answer-btn {
      position: relative; padding: 16px 24px 16px 56px;
      background: var(--primary); color: #fff;
      border: 4px solid var(--primary); border-radius: 14px;
      font-size: 1.5em; font-weight: 700; text-align: left;
      cursor: pointer; transition: background-color .3s, transform .15s, border-color .3s;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .answer-btn span.letter {
      position: absolute; left: 18px; top: 50%;
      transform: translateY(-50%);
      width: 42px; height: 42px; line-height: 42px;
      background: #fff; color: var(--primary);
      font-size: 1.4em; font-weight: 900;
      border-radius: 50%; text-align: center;
    }
    .answer-btn.correct { background: var(--correct); border-color: var(--correct); animation: pulseCorrect 0.5s forwards; }
    .answer-btn.wrong   { background: var(--wrong); border-color: var(--wrong); animation: shake 0.5s forwards; }
    .answer-btn.disabled { pointer-events: none; opacity: .8; }
    #scoreDisplay {
      font-size: 1.6em; color: var(--primary);
      margin-bottom: 10px; font-weight: 700;
    }
    #progressDisplay { /* Yeni ilerleme gÃ¶stergesi */
      font-size: 1.4em; color: var(--text);
      margin-bottom: 20px; font-weight: 600;
    }
    #backToCardsBtn {
      font-size: 2em; padding: 16px 36px;
      border-radius: 18px;
    }

    /* Animasyonlar */
    @keyframes pulseCorrect {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }

    @media (min-width:600px) {
      body { padding: 40px; }
    }
  </style>
</head>
<body>

  <h1>Ä°ngilizce Kelime KartlarÄ±</h1>

  <div class="card" id="card" title="TÄ±klayÄ±nca TÃ¼rkÃ§esi gÃ¶ster/gizle">
    <div class="emoji" id="cardEmoji"></div>
    <div class="text" id="cardText">YÃ¼kleniyor...</div>
    <div class="translation" id="cardTranslation"></div>
  </div>

  <div class="controls" id="cardControls">
    <button id="prevBtn">Ã–nceki</button>
    <button id="nextBtn">Sonraki</button>
    <button id="speakBtn">ðŸ”Š</button>
    <button id="testBtn">Teste GeÃ§</button>
  </div>

  <div id="testArea" class="hide">
    <h2>20 Soruluk Kelime Testi</h2>
    <div class="question-box" id="question">HazÄ±rlanÄ±yor...</div>
    <div class="answers" id="answers"></div>
    <div id="scoreDisplay">Puan: 0</div>
    <div id="progressDisplay">Soru: 0/20</div> <button id="backToCardsBtn">Kartlara Geri DÃ¶n</button>
  </div>

  <script>
    const words = [
      {en:"Hello", tr:"Merhaba", emoji:"ðŸ‘‹"}, {en:"Goodbye", tr:"HoÅŸÃ§a kal", emoji:"ðŸ‘‹"},
      {en:"Please", tr:"LÃ¼tfen", emoji:"ðŸ™"}, {en:"Thank you", tr:"TeÅŸekkÃ¼r ederim", emoji:"ðŸ™"},
      {en:"Sorry", tr:"Ã–zÃ¼r dilerim", emoji:"ðŸ˜”"}, {en:"Yes", tr:"Evet", emoji:"ðŸ‘"},
      {en:"No", tr:"HayÄ±r", emoji:"ðŸ‘Ž"}, {en:"Welcome", tr:"HoÅŸ geldin", emoji:"ðŸ¤—"},
      {en:"Excuse me", tr:"Afedersiniz", emoji:"ðŸ™‡"}, {en:"OK", tr:"Tamam", emoji:"ðŸ‘Œ"},
      {en:"Mother", tr:"Anne", emoji:"ðŸ‘©â€ðŸ‘§"}, {en:"Father", tr:"Baba", emoji:"ðŸ‘¨â€ðŸ‘§"},
      {en:"Sister", tr:"KÄ±z kardeÅŸ", emoji:"ðŸ‘§"}, {en:"Brother", tr:"Erkek kardeÅŸ", emoji:"ðŸ‘¦"},
      {en:"Friend", tr:"ArkadaÅŸ", emoji:"ðŸ¤"}, {en:"Baby", tr:"Bebek", emoji:"ðŸ‘¶"},
      {en:"Girl", tr:"KÄ±z", emoji:"ðŸ‘§"}, {en:"Boy", tr:"Erkek", emoji:"ðŸ‘¦"},
      {en:"Family", tr:"Aile", emoji:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}, {en:"People", tr:"Ä°nsanlar", emoji:"ðŸ§‘â€ðŸ¤â€ðŸ§‘"},
      {en:"House", tr:"Ev", emoji:"ðŸ "}, {en:"Room", tr:"Oda", emoji:"ðŸšª"},
      {en:"Bed", tr:"Yatak", emoji:"ðŸ›ï¸"}, {en:"Table", tr:"Masa", emoji:"ðŸª‘"},
      {en:"Chair", tr:"Sandalye", emoji:"ðŸª‘"}, {en:"Door", tr:"KapÄ±", emoji:"ðŸšª"},
      {en:"Window", tr:"Pencere", emoji:"ðŸªŸ"}, {en:"TV", tr:"Televizyon", emoji:"ðŸ“º"},
      {en:"Lamp", tr:"Lamba", emoji:"ðŸ’¡"}, {en:"Carpet", tr:"HalÄ±", emoji:"ðŸ§¶"},
      {en:"School", tr:"Okul", emoji:"ðŸ«"}, {en:"Teacher", tr:"Ã–ÄŸretmen", emoji:"ðŸ‘©â€ðŸ«"},
      {en:"Student", tr:"Ã–ÄŸrenci", emoji:"ðŸ§‘â€ðŸŽ“"}, {en:"Book", tr:"Kitap", emoji:"ðŸ“š"},
      {en:"Pen", tr:"TÃ¼kenmez kalem", emoji:"ðŸ–Šï¸"}, {en:"Pencil", tr:"KurÅŸun kalem", emoji:"âœï¸"},
      {en:"Bag", tr:"Ã‡anta", emoji:"ðŸŽ’"}, {en:"Ruler", tr:"Cetvel", emoji:"ðŸ“"},
      {en:"Eraser", tr:"Silgi", emoji:"ðŸ©¹"}, {en:"Board", tr:"Tahta", emoji:"ðŸª§"},
      {en:"Dog", tr:"KÃ¶pek", emoji:"ðŸ¶"}, {en:"Cat", tr:"Kedi", emoji:"ðŸ±"},
      {en:"Bird", tr:"KuÅŸ", emoji:"ðŸ¦"}, {en:"Fish", tr:"BalÄ±k", emoji:"ðŸŸ"},
      {en:"Cow", tr:"Ä°nek", emoji:"ðŸ„"}, {en:"Horse", tr:"At", emoji:"ðŸŽ"},
      {en:"Duck", tr:"Ã–rdek", emoji:"ðŸ¦†"}, {en:"Lion", tr:"Aslan", emoji:"ðŸ¦"},
      {en:"Elephant", tr:"Fil", emoji:"ðŸ˜"}, {en:"Monkey", tr:"Maymun", emoji:"ðŸ’"},
      {en:"Apple", tr:"Elma", emoji:"ðŸŽ"}, {en:"Banana", tr:"Muz", emoji:"ðŸŒ"},
      {en:"Bread", tr:"Ekmek", emoji:"ðŸž"}, {en:"Water", tr:"Su", emoji:"ðŸ’§"},
      {en:"Milk", tr:"SÃ¼t", emoji:"ðŸ¥›"}, {en:"Egg", tr:"Yumurta", emoji:"ðŸ¥š"},
      {en:"Cheese", tr:"Peynir", emoji:"ðŸ§€"}, {en:"Meat", tr:"Et", emoji:"ðŸ–"},
      {en:"Rice", tr:"PirinÃ§", emoji:"ðŸš"}, {en:"Cake", tr:"Kek", emoji:"ðŸ°"},
      {en:"Red", tr:"KÄ±rmÄ±zÄ±", emoji:"ðŸ”´"}, {en:"Blue", tr:"Mavi", emoji:"ðŸ”µ"},
      {en:"Green", tr:"YeÅŸil", emoji:"ðŸŸ¢"}, {en:"Yellow", tr:"SarÄ±", emoji:"ðŸŸ¡"},
      {en:"Black", tr:"Siyah", emoji:"âš«"}, {en:"White", tr:"Beyaz", emoji:"âšª"},
      {en:"Orange", tr:"Turuncu", emoji:"ðŸŸ "}, {en:"Pink", tr:"Pembe", emoji:"ðŸŒ¸"},
      {en:"Brown", tr:"Kahverengi", emoji:"ðŸŸ¤"}, {en:"Purple", tr:"Mor", emoji:"ðŸŸ£"},
      {en:"One", tr:"Bir", emoji:"1ï¸âƒ£"}, {en:"Two", tr:"Ä°ki", emoji:"2ï¸âƒ£"},
      {en:"Three", tr:"ÃœÃ§", emoji:"3ï¸âƒ£"}, {en:"Four", tr:"DÃ¶rt", emoji:"4ï¸âƒ£"},
      {en:"Five", tr:"BeÅŸ", emoji:"5ï¸âƒ£"}, {en:"Day", tr:"GÃ¼n", emoji:"â˜€ï¸"},
      {en:"Night", tr:"Gece", emoji:"ðŸŒ™"}, {en:"Morning", tr:"Sabah", emoji:"ðŸŒ…"},
      {en:"Evening", tr:"AkÅŸam", emoji:"ðŸŒ‡"}, {en:"Today", tr:"BugÃ¼n", emoji:"ðŸ“…"},
      {en:"Shirt", tr:"GÃ¶mlek", emoji:"ðŸ‘•"}, {en:"Pants", tr:"Pantolon", emoji:"ðŸ‘–"},
      {en:"Dress", tr:"Elbise", emoji:"ðŸ‘—"}, {en:"Skirt", tr:"Etek", emoji:"ðŸ‘š"},
      {en:"Shoes", tr:"AyakkabÄ±", emoji:"ðŸ‘Ÿ"}, {en:"Socks", tr:"Ã‡orap", emoji:"ðŸ§¦"},
      {en:"Hat", tr:"Åžapka", emoji:"ðŸŽ©"}, {en:"Jacket", tr:"Ceket", emoji:"ðŸ§¥"},
      {en:"Coat", tr:"Kaban", emoji:"ðŸ§¥"}, {en:"T-shirt", tr:"TiÅŸÃ¶rt", emoji:"ðŸ‘•"},
      {en:"Head", tr:"Kafa", emoji:"ðŸ§‘â€ðŸ¦²"}, {en:"Hair", tr:"SaÃ§", emoji:"ðŸ’‡â€â™‚ï¸"},
      {en:"Eye", tr:"GÃ¶z", emoji:"ðŸ‘ï¸"}, {en:"Nose", tr:"Burun", emoji:"ðŸ‘ƒ"},
      {en:"Mouth", tr:"AÄŸÄ±z", emoji:"ðŸ‘„"}, {en:"Ear", tr:"Kulak", emoji:"ðŸ‘‚"},
      {en:"Hand", tr:"El", emoji:"âœ‹"}, {en:"Arm", tr:"Kol", emoji:"ðŸ’ª"},
      {en:"Leg", tr:"Bacak", emoji:"ðŸ¦µ"}, {en:"Foot", tr:"Ayak", emoji:"ðŸ¦¶"}
    ];

    let currentIndex = 0;
    let quiz = [];
    let qIndex = 0;
    let score = 0;
    let questionIsEnglish;
    let wrongAnswers = []; // YanlÄ±ÅŸ bilinen kelimeleri tutacak dizi

    // Element referanslarÄ±
    const card      = document.getElementById('card');
    const cardEmoji = document.getElementById('cardEmoji');
    const cardText  = document.getElementById('cardText');
    const cardTrans = document.getElementById('cardTranslation');
    const prevBtn   = document.getElementById('prevBtn');
    const nextBtn   = document.getElementById('nextBtn');
    const speakBtn  = document.getElementById('speakBtn');
    const testBtn   = document.getElementById('testBtn');
    const cardCtrls = document.getElementById('cardControls');
    const testArea  = document.getElementById('testArea');
    const question  = document.getElementById('question');
    const answers   = document.getElementById('answers');
    const scoreDisp = document.getElementById('scoreDisplay');
    const progressDisp = document.getElementById('progressDisplay'); // Yeni referans
    const backBtn   = document.getElementById('backToCardsBtn');
    const bodyEl    = document.body;

    // KartlarÄ± gÃ¶ster
    function renderCard() {
      const w = words[currentIndex];
      cardEmoji.textContent = w.emoji;
      cardText.textContent  = w.en;
      // KartÄ± ilk haline getir
      card.classList.remove('flipped');
      cardText.style.display = 'block';
      cardEmoji.style.display = 'block';
      cardTrans.style.display = 'none';
    }

    // Telaffuz
    function speak(txt) {
      // Ã–nceki konuÅŸmayÄ± durdur
      if (speechSynthesis.speaking) {
          speechSynthesis.cancel();
      }
      const u = new SpeechSynthesisUtterance(txt);
      u.lang = 'en-US'; // Ä°ngilizce
      u.rate = 0.8;    // KonuÅŸma hÄ±zÄ±
      u.pitch = 1;     // Ses tonu
      speechSynthesis.speak(u);
    }

    // Shuffle (Diziyi karÄ±ÅŸtÄ±rma)
    function shuffle(a) {
      for (let i=a.length-1;i>0;i--) {
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    // Feedback sesi
    function playSound(type) {
      const ctx = new (AudioContext||webkitAudioContext)();
      const o = ctx.createOscillator(), g = ctx.createGain();
      o.connect(g); g.connect(ctx.destination);
      o.frequency.value = type==='correct'?500:200; // DoÄŸru iÃ§in 500Hz, yanlÄ±ÅŸ iÃ§in 200Hz
      g.gain.setValueAtTime(0.3,ctx.currentTime);
      o.start(ctx.currentTime); o.stop(ctx.currentTime+0.2); // Daha kÄ±sa ses
    }

    // Eventler
    prevBtn.onclick = ()=>{
      currentIndex=(currentIndex-1+words.length)%words.length;
      renderCard();
      speak(words[currentIndex].en);
    };
    nextBtn.onclick = ()=>{
      currentIndex=(currentIndex+1)%words.length;
      renderCard();
      speak(words[currentIndex].en);
    };
    speakBtn.onclick= ()=>{ speak(words[currentIndex].en); };

    // Kart tÄ±klama olayÄ± - Animasyonlu Ã§evirme
    card.onclick = () => {
      card.classList.toggle('flipped'); // 'flipped' sÄ±nÄ±fÄ±nÄ± ekle/Ã§Ä±kar

      // Animasyon bitince metni gÃ¶ster/gizle
      setTimeout(() => {
        const w = words[currentIndex];
        if (card.classList.contains('flipped')) {
          // Kart Ã§evrildiÄŸinde TÃ¼rkÃ§esini gÃ¶ster
          cardText.style.display = 'none';
          cardEmoji.style.display = 'none';
          cardTrans.textContent = w.tr;
          cardTrans.style.display = 'block';
        } else {
          // Kart geri dÃ¶ndÃ¼ÄŸÃ¼nde Ä°ngilizcesini gÃ¶ster
          cardText.textContent = w.en;
          cardEmoji.textContent = w.emoji;
          cardText.style.display = 'block';
          cardEmoji.style.display = 'block';
          cardTrans.style.display = 'none';
        }
        speak(w.en); // Her Ã§evirmede Ä°ngilizcesini seslendir
      }, 300); // CSS transition sÃ¼resiyle eÅŸleÅŸmeli
    };

    // Teste geÃ§ butonu
    testBtn.onclick = ()=> {
      quiz = shuffle([...words]).slice(0,20); // 20 soruluk quiz hazÄ±rla
      qIndex = 0; // Soru indeksi sÄ±fÄ±rla
      score = 0;  // PuanÄ± sÄ±fÄ±rla
      wrongAnswers = []; // Her yeni testte yanlÄ±ÅŸ cevaplarÄ± sÄ±fÄ±rla

      // Gerekli elementleri gizle/gÃ¶ster
      card.classList.add('hide');
      cardCtrls.classList.add('hide');
      testBtn.classList.add('hide');
      testArea.classList.remove('hide');

      loadQuestion();    // Ä°lk soruyu yÃ¼kle
      updateScore();     // PuanÄ± gÃ¼ncelle
      updateProgress();  // Ä°lerleme gÃ¶stergesini gÃ¼ncelle
    };

    // Kartlara geri dÃ¶n butonu
    backBtn.onclick = ()=> {
      testArea.classList.add('hide');
      card.classList.remove('hide');
      cardCtrls.classList.remove('hide');
      testBtn.classList.remove('hide');
      card.classList.remove('flipped'); // KartÄ± baÅŸlangÄ±Ã§ pozisyonuna getir
      renderCard(); // Kart gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ tekrar oluÅŸtur
      bodyEl.style.backgroundColor='var(--bg)'; // Arkaplan rengini sÄ±fÄ±rla
    };

    // Yeni: Test sorusunu yÃ¼kler
    function loadQuestion() {
      bodyEl.style.backgroundColor = 'var(--bg)'; // Arkaplan rengini normale dÃ¶ndÃ¼r
      answers.innerHTML = ''; // Ã–nceki ÅŸÄ±klarÄ± temizle

      // Test bitti mi kontrol et
      if (qIndex >= quiz.length) {
        // Test bittiÄŸinde sonuÃ§ Ã¶zetini gÃ¶ster
        showQuizResult();
        return; // Fonksiyondan Ã§Ä±k
      }

      updateScore();    // PuanÄ± gÃ¼ncelle
      updateProgress(); // Ä°lerleme gÃ¶stergesini gÃ¼ncelle

      // Sorunun Ä°ngilizce mi TÃ¼rkÃ§e mi olacaÄŸÄ±na rastgele karar ver
      questionIsEnglish = Math.random() < 0.5;
      const correct = quiz[qIndex]; // DoÄŸru cevap kelimesi

      // Soruyu ayarla
      question.textContent = questionIsEnglish ? correct.en : correct.tr;

      // ÅžÄ±klar iÃ§in seÃ§enekleri oluÅŸtur (doÄŸru cevap ve 3 yanlÄ±ÅŸ cevap)
      const opts = [correct];
      while (opts.length < 4) {
        const r = words[Math.floor(Math.random() * words.length)];
        // SeÃ§eneklerde daha Ã¶nce yoksa ekle ve doÄŸru cevapla aynÄ± kelime olmasÄ±n
        if (!opts.includes(r) && r.en !== correct.en) opts.push(r);
      }

      shuffle(opts).forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        // ÅžÄ±k metnini ayarla
        btn.innerHTML = `<span class="letter">${String.fromCharCode(65 + i)}</span>` + (questionIsEnglish ? opt.tr : opt.en);
        btn.onclick = () => selectAnswer(btn, opt, correct); // TÄ±klama olayÄ±nÄ± ayarla
        answers.appendChild(btn); // ÅžÄ±kkÄ± DOM'a ekle
      });
    }

    // Yeni: Cevap seÃ§ildiÄŸinde
    function selectAnswer(btn, sel, corr) {
      const ok = sel === corr; // Cevap doÄŸru mu?
      playSound(ok ? 'correct' : 'wrong'); // Geri bildirim sesi Ã§al

      // Arkaplan rengini cevaba gÃ¶re ayarla
      bodyEl.style.backgroundColor = ok ? 'var(--correct)' : 'var(--wrong)';

      if (ok) {
        btn.classList.add('correct'); // DoÄŸru cevabÄ± iÅŸaretle
        score++; // PuanÄ± artÄ±r
      } else {
        btn.classList.add('wrong'); // YanlÄ±ÅŸ cevabÄ± iÅŸaretle
        wrongAnswers.push(corr); // YanlÄ±ÅŸ bilinen kelimeyi ekle
        Array.from(answers.children).forEach(b => {
          // DoÄŸru cevabÄ±n metnini iÃ§eren butonu bul
          const buttonText = b.textContent.substring(1); // Harfi atlayÄ±p metni al
          const correctAnswerText = questionIsEnglish ? corr.tr : corr.en;

          if (buttonText === correctAnswerText) {
            b.classList.add('correct');
          }
        });
      }
      // TÃ¼m ÅŸÄ±klarÄ± devre dÄ±ÅŸÄ± bÄ±rak
      Array.from(answers.children).forEach(b => { b.disabled = true; b.classList.add('disabled'); });
      // 1.5 saniye sonra yeni soruyu yÃ¼kle
      setTimeout(() => { qIndex++; loadQuestion(); }, 1500);
    }

    // PuanÄ± gÃ¼ncelleyen fonksiyon
    function updateScore() {
      scoreDisp.textContent = `Puan: ${score}/${quiz.length}`;
    }

    // Yeni: Ä°lerleme gÃ¶stergesini gÃ¼ncelleyen fonksiyon
    function updateProgress() {
        if (qIndex < quiz.length) { // Test bitmediyse
            progressDisp.textContent = `Soru: ${qIndex + 1}/${quiz.length}`;
        } else { // Test bittiyse
            progressDisp.textContent = ''; // BoÅŸalt
        }
    }

    // Yeni Fonksiyon: Test sonuÃ§larÄ±nÄ± gÃ¶sterir
    function showQuizResult() {
      question.innerHTML = `Test tamamlandÄ±!<br>PuanÄ±nÄ±z: <span style="color: var(--primary);">${score}/${quiz.length}</span>`;
      answers.innerHTML = ''; // ÅžÄ±klarÄ± temizle
      scoreDisp.textContent = '';
      progressDisp.textContent = '';

      if (wrongAnswers.length > 0) {
        const wrongListTitle = document.createElement('h3');
        wrongListTitle.style.color = 'var(--text)';
        wrongListTitle.style.marginBottom = '10px';
        wrongListTitle.textContent = 'Tekrar Ã‡alÄ±ÅŸman Gereken Kelimeler:';
        answers.appendChild(wrongListTitle);

        const wrongList = document.createElement('ul');
        wrongList.style.listStyle = 'none';
        wrongList.style.padding = '0';
        wrongList.style.marginBottom = '20px';
        wrongList.style.fontSize = '1.3em';
        wrongList.style.color = 'var(--text)';

        // Tekrar eden kelimeleri listede bir kez gÃ¶ster
        const uniqueWrongAnswers = [...new Set(wrongAnswers)];

        uniqueWrongAnswers.forEach(word => {
          const listItem = document.createElement('li');
          listItem.innerHTML = `<strong>${word.en}</strong> - ${word.tr} ${word.emoji}`;
          wrongList.appendChild(listItem);
        });
        answers.appendChild(wrongList);

        const retryWrongBtn = document.createElement('button');
        retryWrongBtn.textContent = 'YanlÄ±ÅŸlarÄ± Tekrarla';
        retryWrongBtn.style.background = 'var(--primary)';
        retryWrongBtn.style.color = '#fff';
        retryWrongBtn.style.fontSize = '1.2em';
        retryWrongBtn.style.padding = '10px 20px';
        retryWrongBtn.style.borderRadius = '10px';
        retryWrongBtn.onclick = () => {
          quiz = shuffle([...uniqueWrongAnswers]); // Sadece yanlÄ±ÅŸ bilinenleri tekrarla
          qIndex = 0;
          score = 0;
          wrongAnswers = [];
          loadQuestion();
          updateScore();
          updateProgress();
        };
        answers.appendChild(retryWrongBtn);
      }
    }

    // Ä°lk kartÄ± yÃ¼kle ve seslendir
    renderCard();
    speak(words[0].en);
  </script>

</body>
</html>
